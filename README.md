# ensemble-colorist
Draw ensemble as you want.

## Usage

```bash
usage: render.py [-h] [--data DATA] [--theme THEME] [--output OUTPUT] [--title TITLE]

options:
  -h, --help       show this help message and exit
  --data DATA      a data csv file with the format according to data_adapter/README.md
  --theme THEME    a theme json with the format according to the following chapter
  --output OUTPUT  image path
  --title TITLE    title on the image
```

You may need to install `cartopy matplotlib pandas` before using the script.

## Be a Colorist

Configure your theme json with the following format:
```json
{
    "backgroud": {
        "enable_coast": true,
        "enable_national_border": true, 
        "enable_province_border": true,     // Draw province line. Using state data from cartopy
        "sea_color": "#e0f2fb",
        "land_color": "#ffebcd",
        "border_color": "#a4a09d",        // Color of oastline and national boundaries
        "border_width": 1,
        "enable_coordinate_grid": true,
        "left_longitude": 100,
        "right_longitude": 160,
        "top_latitude": 50,
        "bottom_latitude": 5,
        "width": 16,                        // Width, height: image size 
        "height": 12,
        "enable_title": true
    },
    "color": {
        "boundaries": [
            1000, 985, 975, 955, 935        // Pressure (hPa) boundaries
        ],
        "colors":[                          // Color of different segments. 
            "#edcf24",                    // Number of colors should be number of boundaries + 1
            "#0000ff",
            "#0f8001",
            "#fe9d45",
            "#fe01fe",
            "#fe0100"
        ],
        "apply_to_line": false,             // Whether the color should be applied to track line
        "line_width": 1
    },
    "decay": {
        "boundaries": [                     // Decay time (hour)
            72,                             // e.g. after 72h, size should turn from 75 to 25.
            216
        ],
        "size": [                           // Dot sizes
            75,                             // Number of size should be number of boundaries + 1
            25,
            10
        ],
        "line_width": [                     // Dot line width
            1.5,                            // Number of width should be number of boundaries + 1
            1,
            0.5
        ],
        "alpha": [                          // Alpha number of the color. 
            1,                              // Apply to dots only.
            0.6,
            0.4
        ],
        "shape": [                          // Shape of the dots.
            "o",                            // See matplotlib style document for detail.
            "s",
            "^"
        ]
    }
}
```

You can see some theme preset in `preset/`.

## Credit

`data_adapter/raw_data/FNV3.csv` is generated by Google. See [WeatherLab](https://deepmind.google.com/science/weatherlab) for source.